(()=>{"use strict";var t={365:(t,e,i)=>{i.d(e,{A:()=>v});var n=i(601),s=i.n(n),o=i(314),r=i.n(o),a=i(417),h=i.n(a),u=new URL(i(834),i.b),d=new URL(i(96),i.b),c=new URL(i(522),i.b),l=new URL(i(507),i.b),f=r()(s()),p=h()(u),m=h()(d),g=h()(c),y=h()(l);f.push([t.id,`/* press-start-2p-regular - latin */\n@font-face {\n  font-family: 'Press Start 2P';\n  font-style: normal;\n  font-weight: 400;\n  src: local(''),\n       url(${p}) format('woff2'), /* Chrome 26+, Opera 23+, Firefox 39+ */\n       url(${m}) format('woff'); /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n}\n\nbody {\n    background-color: #222;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n}\n\n.js-pacman-playground {\n    position: absolute;\n    color: #EFEFEF;\n    font-family: 'Press Start 2P', cursive;\n    font-size: 2em;\n    background-color: #000;\n    background-image: url(${g});\n    background-size: 400% 200%;\n    display: none;\n    cursor: default;\n    user-select: none;\n    touch-action: none;\n}\n\n.js-pacman-playground.with-border {\n    border-radius: 0.5em;\n    border: 1em solid #000;\n}\n\n.js-pacman-playground.with-border.with-light {\n    box-shadow: 0 0 1em 0.1em #EEE;\n}\n\n.js-pacman-playground.maze-1 {\n    background-position: 0 0;\n}\n\n.js-pacman-playground.maze-2 {\n    background-position: -100% 0;\n}\n\n.js-pacman-playground.maze-3 {\n    background-position: -200% 0;\n}\n\n.js-pacman-playground.maze-4 {\n    background-position: -300% 0;\n}\n\n.js-pacman-playground.maze-1.blink {\n    background-position: 0 -100%;\n}\n\n.js-pacman-playground.maze-2.blink {\n    background-position: -100% -100%;\n}\n\n.js-pacman-playground.maze-3.blink {\n    background-position: -200% -100%;\n}\n\n.js-pacman-playground.maze-4.blink {\n    background-position: -300% -100%;\n}\n\n.js-pacman-playground .splash {\n    background-image: url(${y});\n    background-size: 100% 100%;\n    background-color: #000;\n    text-align: center;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    z-index: 1;\n}\n\n.js-pacman-playground .splash a {\n    color: #DDDDDD;\n    cursor: pointer;\n    font-weight: bold;\n}\n\n.js-pacman-playground .splash a:hover {\n    color: #FFF;\n}\n\n.js-pacman-playground .splash a.start {\n    position: relative;\n    top: 65%;\n    text-transform: uppercase;\n    font-size: 1.6em;\n}\n\n.js-pacman-playground .splash .title {\n    position: absolute;\n    top: 22.04%;\n    left: 0;\n    right: 0;\n    text-align: center;\n    color: #FCB644;\n}\n\n.js-pacman-playground .splash p.nerd {\n    position: absolute;\n    top: 33.15%;\n    left: 35.26%;\n    text-align: center;\n    color: #FFF;\n}\n\n.js-pacman-playground .splash p span {\n    color : #FFFF00;\n}\n\n.js-pacman-playground .splash .keys {\n    position: absolute;\n    top: 85%;\n    left: 0;\n    right: 0;\n    text-align: center;\n    color: #FFF;\n}\n\n.js-pacman-playground .splash .credits {\n    font-family: 'Press Start 2P', cursive;\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    color: #FFF;\n    padding: 0.1em;\n    font-size: 0.6em;\n}\n\n.js-pacman-playground .splash .credits span {\n    color: #FF3333;\n}\n\n.js-pacman-playground .splash .credits a {\n    color: #FFFF00;\n}\n\n.js-pacman-playground .splash .credits a:hover {\n    color: #FFFF4D;\n}\n\n.js-pacman-playground .loadbar {\n    position: absolute;\n    top: 65%;\n    left: 22.32%;\n    right: 22.32%;\n    background: #FF0;\n    height: 3.472%;\n    overflow: visible;\n    border: 2px solid #FFF;\n}\n\n.js-pacman-playground .loadbar .inner {\n    position: relative;\n    background: #FF0000;\n    height: 100%;\n    width: 0;\n}\n\n.js-pacman-playground .score {\n    position: absolute;\n    top: 0;\n    right: 0.4464%;\n    left: 0.4464%;\n    text-align: center;\n    z-index: 2\n}\n\n.js-pacman-playground .score .p1-score {\n    position: absolute;\n    width: 22%;\n    top: 0;\n    left: 0;\n}\n\n.js-pacman-playground .score .high-score {\n    width: 40%;\n    margin-left: auto;\n    margin-right: auto;\n}\n\n.js-pacman-playground .score .p2-score {\n    position: absolute;\n    width: 22%;\n    top: 0;\n    right: 0;\n}\n\n.js-pacman-playground .score span {\n    text-align: right;\n    display: block;\n}\n\n.js-pacman-playground .score .high-score span {\n    text-align: center;\n}\n\n.js-pacman-playground .start-p1 {\n    position: absolute;\n    top: 38.71%;\n    left: 0;\n    right: 0;\n    text-align: center;\n    color: #5EE;\n}\n\n.js-pacman-playground .game-over,\n.js-pacman-playground .start-ready,\n.js-pacman-playground .sound-status,\n.js-pacman-playground .paused {\n    position: absolute;\n    top: 55.55%;\n    left: 0;\n    right: 0;\n    text-align: center;\n    color: #F00;\n}\n\n.js-pacman-playground .sound-status.on span.on,\n.js-pacman-playground .sound-status span.off {\n    display : inline;\n}\n\n.js-pacman-playground .sound-status.on span.off,\n.js-pacman-playground .sound-status span.on {\n    display : none;\n}\n\n.js-pacman-playground .sound-status .wrap,\n.js-pacman-playground .paused .wrap {\n    background: #000;\n    padding: 0.1em;\n}\n\n@media screen and (orientation: portrait) {\n    /* body {\n        background-color: #000;\n    }\n\n    .js-pacman-playground.with-border {\n        border-radius: 0;\n        box-shadow: none;\n        border: none;\n    } */\n}\n`,""]);const v=f},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",n=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),n&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),n&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,n,s,o){"string"==typeof t&&(t=[[null,t,void 0]]);var r={};if(n)for(var a=0;a<this.length;a++){var h=this[a][0];null!=h&&(r[h]=!0)}for(var u=0;u<t.length;u++){var d=[].concat(t[u]);n&&r[d[0]]||(void 0!==o&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=o),i&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=i):d[2]=i),s&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=s):d[4]="".concat(s)),e.push(d))}},e}},417:t=>{t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},601:t=>{t.exports=function(t){return t[1]}},269:(t,e,i)=>{e.__esModule=!0,e.default=void 0;var n,s=(n=i(125))&&n.__esModule?n:{default:n};function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,r(t,e)}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}var a={key:!0,state:!0,onCreate:!0,onChange:!0,onRender:!0},h=function(t,e){var i=t&&t.match&&t.match(new RegExp(d.EXPRESSION_PLACEHOLDER_TEMPLATE("(\\d+)")));return i&&i[1]?e[i[1]]:t},u=function(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];return"function"==typeof t?t.apply(e,n):t},d=e.default=function(t){function e(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=t.apply(this,arguments)||this,Object.keys(i).forEach((function(t){a[t]&&(e[t]=i[t])})),e.options=i,e.onChange=e.onChange.bind(e),e.model&&e.model.on&&e.model.on("change",e.onChange),e.state&&e.state.on&&e.state.on("change",e.onChange),e.onCreate.apply(e,arguments),e}o(e,t);var i=e.prototype;return i.ensureElement=function(){this.el&&(this.delegateEvents(),this.id=this.el.id),this.id||(this.id=this.attributes&&this.attributes.id?u(this.attributes.id,this,this):e.ID_TEMPLATE(this.uid))},i.findElement=function(t){return(t||document).querySelector("#"+this.id)},i.getAttributes=function(){var t=this,e={id:this.id},i={},n=['id="'+this.id+'"'];return this.attributes&&Object.keys(this.attributes).forEach((function(s){if("id"!==s){var o=u(t.attributes[s],t,t);!1===o?i[s]=!0:!0===o?(e[s]="",n.push(s)):(null==o&&(o=""),e[s]=o,n.push(s+'="'+o+'"'))}})),{add:e,remove:i,html:n.join(" ")}},i.hydrate=function(t){var e=this;this.el=this.findElement(t),this.delegateEvents(),this.children.forEach((function(t){return t.hydrate(e.el)})),this.onRender.call(this,"hydrate")},i.recycle=function(t){this.findElement(t).replaceWith(this.el),this.onRender.call(this,"recycle")},i.destroy=function(){return t.prototype.destroy.apply(this,arguments),this.model&&this.model.off&&this.model.off("change",this.onChange),this.state&&this.state.off&&this.state.off("change",this.onChange),this.destroyed=!0,this},i.onCreate=function(){},i.onChange=function(){this.render()},i.onRender=function(){},i.onDestroy=function(){},i.replaceExpressions=function(t,i){var n=this;return t.replace(new RegExp(e.EXPRESSION_PLACEHOLDER_TEMPLATE("(\\d+)"),"g"),(function(t){var s=h(t,n.template.expressions),o=u(s,n,n);return(o instanceof Array?o:[o]).reduce((function(t,n){return t+(!0===n?e.TRUE_PLACEHOLDER:!1===n?e.FALSE_PLACEHOLDER:null==n?"":n&&"function"==typeof n.render?i(n):n)}),"")})).replace(new RegExp("([\\w|data-]+)=([\"'])?("+e.TRUE_PLACEHOLDER+"|"+e.FALSE_PLACEHOLDER+")\\2","g"),(function(t,i,n,s){return s===e.TRUE_PLACEHOLDER?i:""})).replace(new RegExp(e.TRUE_PLACEHOLDER+"|"+e.FALSE_PLACEHOLDER,"g"),"")},i.toString=function(){var t=this;this.destroyChildren();var e=this.tag||"div",i=this.getAttributes().html,n=this.template&&this.template.inner,s=n&&this.replaceExpressions(this.template.inner,(function(e){return t.addChild(e)}));return n?"<"+e+" "+i+">"+s+"</"+e+">":"<"+e+" "+i+" />"},i.render=function(){var t=this;if(this.destroyed)return this;this.el||(this.el=this.createElement(this.tag),this.delegateEvents());var e=this.getAttributes();if(Object.keys(e.remove).forEach((function(e){t.el.removeAttribute(e)})),Object.keys(e.add).forEach((function(i){t.el.setAttribute(i,e.add[i])})),this.template&&this.template.inner){var i=this.children;this.children=[];var n=[],s=[],o=document.activeElement;this.el.innerHTML=this.replaceExpressions(this.template.inner,(function(t){var e=t,o=t.key&&i.find((function(e){return e.key===t.key}));if(o){var r=o.el.tagName.toLowerCase();e="<"+r+' id="'+o.el.id+'"></'+r+">",s.push(o),t.destroy()}else n.push(t);return e})),n.forEach((function(e){t.addChild(e).hydrate(t.el)})),s.forEach((function(e){t.addChild(e).recycle(t.el)})),i.forEach((function(t){s.indexOf(t)>-1||t.destroy()})),this.el.contains(o)&&o.focus()}return this.onRender.call(this,"render"),this},e.extend=function(t){var e=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e}(this);return Object.assign(e.prototype,"function"==typeof t?t(this.prototype):t),e},e.mount=function(t,e,i){var n=new this(t);if(e){if(i)n.toString();else{var s=document.createElement("template");s.innerHTML=n,e.appendChild(s.content)}n.hydrate(e)}return n},e.create=function(t){for(var i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];var o=[];t.forEach((function(t,i){o.push(t),n[i]&&o.push("function"==typeof n[i]||"object"==typeof n[i]?e.EXPRESSION_PLACEHOLDER_TEMPLATE(i):n[i])}));var r=o.join("").trim().replace(/\n/g,e.NEW_LINE_PLACEHOLDER),a=r.match(/^<([a-z]+[1-6]?)(.*?)>(.*)<\/\1>$/)||r.match(/^<([a-z]+)(.*?)\/>$/),u=a[1],d=function(t){for(var e,i={},n=/([\w|data-]+)(?:=["']?((?:.(?!["']?\s+(?:\S+)=|\s*\/?[>"']))+.)["']?)?/g;null!==(e=n.exec(t));)i[e[1]]=void 0===e[2]||e[2];return i}(a[2].replace(new RegExp(e.NEW_LINE_PLACEHOLDER,"g"),"")),c={},l=Object.keys(d).reduce((function(t,e){var i=e.match(/on(([A-Z]{1}[a-z]+)+)/),s=h(d[e],n);if(i&&i[1]){var o=i[1].toLowerCase();return Object.keys(s).forEach((function(t){return c[o+("&"===t?"":" "+t)]=s[t]})),t}return t[e]=s,t}),{}),f=a[3]&&a[3].replace(new RegExp(e.NEW_LINE_PLACEHOLDER,"g"),"\n");return this.extend({tag:u,attributes:l,events:c,template:{inner:f,expressions:n}})},e}(s.default);d.ID_TEMPLATE=function(t){return"rasti-component-"+t},d.EXPRESSION_PLACEHOLDER_TEMPLATE=function(t){return"__RASTI_EXPRESSION_{"+t+"}__"},d.TRUE_PLACEHOLDER="__RASTI_TRUE__",d.FALSE_PLACEHOLDER="__RASTI_FALSE__",d.NEW_LINE_PLACEHOLDER="__RASTI_NEW_LINE__"},828:(t,e)=>{e.__esModule=!0,e.default=void 0,e.default=function(){function t(){}var e=t.prototype;return e.on=function(t,e){if("function"!=typeof e)throw TypeError("Listener must be a function");this.listeners||(this.listeners={}),this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.once=function(t,e){if("function"==typeof e){var i=this,n=e;e=function(){n.apply(void 0,arguments),i.off(t,e)}}this.on(t,e)},e.off=function(t,e){if(t)if(e){var i=this.listeners[t];i&&(i.slice().forEach((function(t,n){t===e&&i.splice(n,1)})),i.length||delete this.listeners[t])}else delete this.listeners[t];else this.listeners={}},e.emit=function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var s=this.listeners&&this.listeners[t];s&&s.length&&s.slice().forEach((function(t){t.apply(void 0,i)}))},t}()},691:(t,e,i)=>{e.__esModule=!0,e.default=void 0;var n,s=(n=i(828))&&n.__esModule?n:{default:n};function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}e.default=function(t){function e(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(e=t.call(this)||this).preinitialize.apply(e,arguments),e.attributes=Object.assign({},e.defaults||{},i),e.previous={},Object.keys(e.attributes).forEach(e.defineAttribute.bind(e)),e}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,o(i,n);var s=e.prototype;return s.preinitialize=function(){},s.defineAttribute=function(t){var e=this;Object.defineProperty(this,t,{get:function(){return e.get(t)},set:function(i){e.set(t,i)}})},s.get=function(t){return this.attributes[t]},s.set=function(t,e){for(var i,n,s,o=this,r=arguments.length,a=new Array(r>2?r-2:0),h=2;h<r;h++)a[h-2]=arguments[h];"object"==typeof t?(i=t,n=[e].concat(a)):((s={})[t]=e,i=s,n=a);var u=this._changing;this._changing=!0;var d={};u||(this.previous=Object.assign({},this.attributes)),Object.keys(i).forEach((function(t){i[t]!==o.attributes[t]&&(d[t]=i[t],o.attributes[t]=i[t])}));var c=Object.keys(d);if(c.length&&(this._pending=["change",this,d].concat(n)),c.forEach((function(t){o.emit.apply(o,["change:"+t,o,i[t]].concat(n))})),u)return this;for(;this._pending;){var l=this._pending;this._pending=null,this.emit.apply(this,l)}return this._pending=null,this._changing=!1,this},s.toJSON=function(){return this.attributes},e}(s.default)},125:(t,e,i)=>{e.__esModule=!0,e.default=void 0;var n,s=(n=i(828))&&n.__esModule?n:{default:n};function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}var r={el:!0,tag:!0,attributes:!0,events:!0,model:!0,template:!0,onDestroy:!0},a=e.default=function(t){function e(){var i,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(i=t.call(this)||this).preinitialize.apply(i,arguments),i.uid="uid"+ ++e.uid,i.delegatedEventListeners=[],i.children=[],Object.keys(n).forEach((function(t){r[t]&&(i[t]=n[t])})),i.ensureElement(),i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,o(i,n);var s=e.prototype;return s.preinitialize=function(){},s.$=function(t){return this.el.querySelector(t)},s.$$=function(t){return this.el.querySelectorAll(t)},s.destroy=function(){return this.destroyChildren(),this.undelegateEvents(),this.off(),this.onDestroy.apply(this,arguments),this},s.onDestroy=function(){},s.addChild=function(t){return this.children.push(t),t},s.destroyChildren=function(){for(;this.children.length;)this.children.shift().destroy()},s.ensureElement=function(){this.el||(this.el=this.createElement(this.tag,this.attributes)),this.delegateEvents()},s.createElement=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=document.createElement(t);return Object.keys(e).forEach((function(t){return i.setAttribute(t,e[t])})),i},s.removeElement=function(){return this.el.parentNode.removeChild(this.el),this},s.delegateEvents=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.events;if(!e)return this;this.delegatedEventListeners.length&&this.undelegateEvents();var i={};return Object.keys(e).forEach((function(n){var s=n.split(" "),o=s.shift(),r=s.join(" "),a=e[n];a=("string"==typeof a?t[a]:a).bind(t),i[o]||(i[o]=[]),i[o].push({selector:r,listener:a})})),Object.keys(i).forEach((function(e){var n=function(n){i[e].forEach((function(e){var i=e.selector,s=e.listener;i&&!n.target.closest(i)||s(n,t)}))};t.delegatedEventListeners.push({type:e,listener:n}),t.el.addEventListener(e,n)})),this},s.undelegateEvents=function(){var t=this;return this.delegatedEventListeners.forEach((function(e){var i=e.type,n=e.listener;t.el.removeEventListener(i,n)})),this.delegatedEventListeners=[],this},s.render=function(){return this.template&&(this.el.innerHTML=this.template(this.model)),this},e}(s.default);a.uid=0},390:(t,e,i)=>{o(i(828)).default;var n=o(i(691));e.Kx=n.default;var s=o(i(125));function o(t){return t&&t.__esModule?t:{default:t}}e.Ss=s.default,o(i(269)).default},72:t=>{var e=[];function i(t){for(var i=-1,n=0;n<e.length;n++)if(e[n].identifier===t){i=n;break}return i}function n(t,n){for(var o={},r=[],a=0;a<t.length;a++){var h=t[a],u=n.base?h[0]+n.base:h[0],d=o[u]||0,c="".concat(u," ").concat(d);o[u]=d+1;var l=i(c),f={css:h[1],media:h[2],sourceMap:h[3],supports:h[4],layer:h[5]};if(-1!==l)e[l].references++,e[l].updater(f);else{var p=s(f,n);n.byIndex=a,e.splice(a,0,{identifier:c,updater:p,references:1})}r.push(c)}return r}function s(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,s){var o=n(t=t||[],s=s||{});return function(t){t=t||[];for(var r=0;r<o.length;r++){var a=i(o[r]);e[a].references--}for(var h=n(t,s),u=0;u<o.length;u++){var d=i(o[u]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}o=h}}},659:t=>{var e={};t.exports=function(t,i){var n=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(i)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var n="";i.supports&&(n+="@supports (".concat(i.supports,") {")),i.media&&(n+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(n+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),n+=i.css,s&&(n+="}"),i.media&&(n+="}"),i.supports&&(n+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(n,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},96:(t,e,i)=>{t.exports=i.p+"./fonts/press-start-2p-v9-latin-regular.woff"},834:(t,e,i)=>{t.exports=i.p+"./fonts/press-start-2p-v9-latin-regular.woff2"},522:(t,e,i)=>{t.exports=i.p+"./img/maze.png"},507:(t,e,i)=>{t.exports=i.p+"./img/start.png"}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var o=e[n]={id:n,exports:{}};return t[n](o,o.exports,i),o.exports}i.m=t,i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var s=n.length-1;s>-1&&(!t||!/^http(s?):/.test(t));)t=n[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),i.b=document.baseURI||self.location.href,i.nc=void 0,i.p,i.p,i.p,i.p,i.p,i.p,i.p,i.p,i.p,i.p,i.p,i.p;var n=i(72),s=i.n(n),o=i(825),r=i.n(o),a=i(659),h=i.n(a),u=i(56),d=i.n(u),c=i(540),l=i.n(c),f=i(113),p=i.n(f),m=i(365),g={};g.styleTagTransform=p(),g.setAttributes=d(),g.insert=h().bind(null,"head"),g.domAPI=r(),g.insertStyleElement=l(),s()(m.A,g),m.A&&m.A.locals&&m.A.locals;var y=i(390);function v(){return v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},v.apply(null,arguments)}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}var _="keydown",w=function(t){function e(e){var i;return(i=t.call(this,v({el:document&&document.body},e))||this).keys={},i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,b(i,n);var s=e.prototype;return s.onKeyUp=function(t){this.keys[t.keyCode]=!1,this.emit("keyup",t)},s.onKeyDown=function(t){this.keys[t.keyCode]=!0,this.emit(_,t)},s.clear=function(){this.keys={}},e}(y.Ss);w.prototype.events={keyup:"onKeyUp",keydown:"onKeyDown"};const E=w;function x(){return x=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},x.apply(null,arguments)}function O(t,e){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O(t,e)}var T="swipe",S="swipe:up",k="swipe:right",j="swipe:down",R="swipe:left",L={threshold:100,restraint:150,allowedTime:400},P=function(t){function e(e){var i;return void 0===e&&(e={}),i=t.call(this,x({},e,{el:e.el||document&&document.body}))||this,Object.keys(L).forEach((function(t){t in e&&(i[t]=e[t])})),i.onTouchStart=i.onTouchStart.bind(i),i.onTouchEnd=i.onTouchEnd.bind(i),i.el.addEventListener("touchstart",i.onTouchStart,!1),i.el.addEventListener("touchend",i.onTouchEnd,!1),i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,O(i,n);var s=e.prototype;return s.onDestroy=function(){this.el.removeEventListener("touchstart",this.onTouchStart),this.el.removeEventListener("touchend",this.onTouchEnd)},s.onTouchStart=function(t){var e=t.changedTouches[0];this.startX=e.pageX,this.startY=e.pageY,this.startTime=new Date},s.onTouchEnd=function(t){var e=null,i=t.changedTouches[0],n=i.pageX-this.startX,s=i.pageY-this.startY;new Date-this.startTime<=this.allowedTime&&(Math.abs(n)>=this.threshold&&Math.abs(s)<=this.restraint?e=n<0?R:k:Math.abs(s)>=this.threshold&&Math.abs(n)<=this.restraint&&(e=s<0?S:j),this.emit(T,e,t))},e}(y.Ss);Object.assign(P.prototype,L);const F=P,A=function(){function t(t,e){this.originalWidth=this.width=t,this.originalHeight=this.height=e,this.widthToHeight=t/e}var e=t.prototype;return e.resize=function(t,e){t/e>this.widthToHeight?(this.width=e*this.widthToHeight,this.height=e):(this.height=t/this.widthToHeight,this.width=t)},e.getFactor=function(){return this.width/this.originalWidth},t}();function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}var D={height:320,width:480,originalHeight:320,originalWidth:480,refreshRate:30,position:"absolute"},M=function(t){function e(e){var i;return i=t.call(this,e)||this,Object.keys(D).forEach((function(t){t in e&&(i[t]=e[t])})),i.sprites=i.children,i.sounds=[],i.callbacks=[],i.loadedSpritesIndex=0,i.loadedSoundsIndex=0,i.keyboard=new E,i.touch=new F,i.scaling=new A(i.originalWidth,i.originalHeight),i.scaling.resize(i.width,i.height),i.state=0,i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,C(i,n);var s=e.prototype;return s.render=function(){return t.prototype.render.call(this),Object.assign(this.el.style,{position:this.position,display:"block",overflow:"hidden",height:this.scaling.height+"px",width:this.scaling.width+"px",fontSize:2*this.scaling.getFactor()+"em"}),this.scenegraph=this.createElement("div",{style:"visibility: hidden;"}),this.el.appendChild(this.scenegraph),this},s.onDestroy=function(){this.keyboard.destroy(),this.touch.destroy()},s.preload=function(){for(var t=this.sprites.length-1;t>=this.loadedSpritesIndex;t--)this.sprites[t].load();for(var e=this.sounds.length-1;e>=this.loadedSoundsIndex;e--)this.sounds[e].load();this.waitForResources()},s.waitForResources=function(){for(var t=0,e=this.loadedSpritesIndex;e<this.sprites.length;e++)this.sprites[e].isReady()&&t++;for(var i=0,n=this.loadedSoundsIndex;n<this.sounds.length;n++)this.sounds[n].isReady()&&i++;var s=this.sprites.length+this.sounds.length-this.loadedSpritesIndex-this.loadedSoundsIndex;if("function"==typeof this.onLoadProgress){var o=(t+i)/s*100;this.onLoadProgress(o)}t+i<s?setTimeout(this.waitForResources.bind(this),100):(this.loadedSpritesIndex=this.sprites.length,this.loadedSoundsIndex=this.sounds.length,0===this.state&&setInterval(this.refresh.bind(this),this.refreshRate),this.state=1,"function"==typeof this._onReadyCallback&&(this._onReadyCallback(),this._onReadyCallback=null),this.scenegraph.style.visibility="visible")},s.addSprite=function(t){var e=this;return this.scenegraph.appendChild(this.addChild(t).el),1===this.state?t.load().then((function(){return e.loadedSpritesIndex++,Promise.resolve()})):Promise.resolve()},s.addSound=function(t){var e=this;return this.sounds.push(t),1===this.state?t.load().then((function(){return e.loadedSoundsIndex++,Promise.resolve()})):Promise.resolve()},s.addCallback=function(t,e){void 0===e&&(e=this.refreshRate),this.callbacks.push({fn:t,refreshRate:this.normalizeRefrashRate(e),idleCounter:0})},s.refresh=function(){if(1===this.state){this.sprites.forEach((function(t){t.refresh()}));for(var t=[],e=this.callbacks.length-1;e>=0;e--){if(this.callbacks[e].idleCounter===this.callbacks[e].refreshRate-1){var i=this.callbacks[e].fn();"boolean"==typeof i?i&&t.push(e):"number"==typeof i&&(this.callbacks[e].refreshRate=this.normalizeRefrashRate(i),this.callbacks[e].idleCounter=0)}this.callbacks[e].idleCounter=(this.callbacks[e].idleCounter+1)%this.callbacks[e].refreshRate}for(e=t.length-1;e>=0;e--)this.callbacks.splice(t[e],1)}},s.clear=function(t){this.destroyChildren(),this.loadedSpritesIndex=0,this.sounds=[],this.loadedSoundsIndex=0,t&&(this.callbacks=[]),this.scenegraph.innerHTML=""},s.muteSound=function(t){for(var e=this.sounds.length-1;e>=0;e--)this.sounds[e].mute(t)},s.start=function(t){"function"==typeof t&&(this._onReadyCallback=t),this.preload()},s.pause=function(){this.state=2,this.scenegraph.style.visibility="hidden"},s.resume=function(t){2===this.state&&("function"==typeof t&&(this._onReadyCallback=t),this.preload())},s.normalizeRefrashRate=function(t){return Math.round(t/this.refreshRate)||1},e}(y.Ss);Object.assign(M.prototype,D);const z=M;var I,X;const G=function(){function t(t){if(!I){var e=window.AudioContext||window.webkitAudioContext;I=new e,(X=I.createGain()).connect(I.destination)}this.url=t}var e=t.prototype;return e.load=function(){var t=this;fetch(this.url).then((function(t){return t.arrayBuffer()})).then((function(t){return function(t){return new Promise((function(e,i){I.decodeAudioData(t,e,i)}))}(t)})).then((function(e){return t.audioBuffer=e,Promise.resolve(e)}))},e.play=function(){"suspended"===I.state&&I.resume();var t=I.createBufferSource();t.buffer=this.audioBuffer,t.connect(X),t.start()},e.mute=function(t){this.muted=!1!==t,this.muted?X.gain.setValueAtTime(0,I.currentTime):X.gain.setValueAtTime(1,I.currentTime)},e.isReady=function(){return!!this.audioBuffer},t}();var Y=function(){function t(t){var e=this;this.soundEnabled=!!t.soundEnabled,this.soundEnabled&&(this.sounds={intro:new G("audio/intro.mp3"),back:new G("audio/back.mp3"),dot:new G("audio/dot.mp3"),eaten:new G("audio/eaten.mp3"),eat:new G("audio/eat.mp3"),frightened:new G("audio/frightened.mp3"),dead:new G("audio/dead.mp3"),bonus:new G("audio/bonus.mp3"),life:new G("audio/life.mp3")},Object.keys(this.sounds).forEach((function(i){t.addSound(e.sounds[i])})))}return t.prototype.play=function(t){this.soundEnabled&&this.sounds[t].play()},t}();const H=Y,N=function(){function t(t,e,i,n){this.code=t,this.col=e,this.row=i,this.map=n,this.width=32,this.height=32,this.x=this.col*this.width+this.width/2,this.y=this.row*this.height+this.height/2+4}var e=t.prototype;return e.isWall=function(){return"="===this.code},e.isHouse=function(){return"h"===this.code},e.isTunnel=function(){return"t"===this.code},e.hasDot=function(){return this.item&&"."===this.code},e.hasPill=function(){return this.item&&"*"===this.code},e.get=function(t){return"u"===t?this.getU():"d"===t?this.getD():"l"===t?this.getL():"r"===t?this.getR():null},e.getU=function(){return this.map.getTile(this.col,this.row-1)||null},e.getD=function(){return this.map.getTile(this.col,this.row+1)||null},e.getL=function(){return this.map.getTile(this.col-1,this.row)||null},e.getR=function(){return this.map.getTile(this.col+1,this.row)||null},t}();var U=function(){function t(t){this.tiles=[],this.width=t[0].length,this.height=t.length,this.tunnels=[];for(var e=0;e<this.height;e++)for(var i=t[e],n=0;n<this.width;n++){var s=i.charAt(n),o=new N(s,n,e,this);this.tiles.push(o),o.isHouse()&&!this.house&&(this.house=o),!o.isTunnel()||0!==o.col&&o.col!==this.width-1||this.tunnels.push(o)}this.houseCenter=this.house.getD().getD(),this.tileWidth=this.tiles[0].width,this.tileHeight=this.tiles[0].height}var e=t.prototype;return e.getTile=function(t,e,i){i&&(t=parseInt(t/this.tileWidth),e=parseInt(e/this.tileHeight)),t>this.width-1&&(t=0),t<0&&(t=this.width-1),e>this.height-1&&(e=0),e<0&&(e=this.height-1);var n=e*this.width+t;return this.tiles[n]||null},e.destroyItems=function(){for(var t=this.tiles.length;t--;){var e=this.tiles[t];e.item&&e.item.destroy()}},e.hideItems=function(){for(var t=this.tiles.length;t--;){var e=this.tiles[t];e.item&&e.item.hide()}},t}();const B=U;function W(t,e){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W(t,e)}const $=function(t){function e(e){return t.call(this,e)||this}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,W(i,n);var s=e.prototype;return s.fetch=function(){if(this.url&&window.localStorage){var t=window.localStorage.getItem(this.url);t&&this.set(JSON.parse(t))}},s.save=function(){this.url&&window.localStorage&&window.localStorage.setItem(this.url,JSON.stringify(this))},e}(y.Kx);var V=function(){return(new Date).getTime()/1e3};const K=function(){function t(t){this.time=t,this.start=V()}var e=t.prototype;return e.pause=function(){this.pauseTime=V()},e.resume=function(){this.start+=V()-this.pauseTime},e.getElapsed=function(){return V()-this.start},e.isElapsed=function(t){return void 0===t&&(t=this.time),this.getElapsed()>t},t}();var q={imageURL:null,numberOfFrame:1,delta:0,refreshRate:30,type:0,offsetX:0,offsetY:0},J=function(){function t(t){var e=this;Object.keys(q).forEach((function(i){i in t&&(e[i]=t[i])}))}var e=t.prototype;return e.load=function(){var t=this;return this.img=new Image,this.img.src=this.imageURL,new Promise((function(e,i){t.img.addEventListener("load",e)}))},e.isReady=function(){return this.img.complete},t}();Object.assign(J.prototype,q);const Z=J;function Q(t,e){return Q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Q(t,e)}var tt={width:32,height:32,x:0,y:0,z:0,offsetX:0,offsetY:0,idleCounter:0,currentFrame:0,frameIncrement:1,angle:0,factor:1,playing:!0,factorH:1,factorV:1,animations:{},defaultAnimation:"default",normalizeRefrashRate:null,type:null},et=function(t){function e(e){var i;return i=t.call(this,e)||this,Object.keys(tt).forEach((function(t){t in e&&(i[t]=e[t])})),i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,Q(i,n);var s=e.prototype;return s.load=function(){var t=this;return Promise.all(Object.keys(this.animations).map((function(e){return t.animations[e].load()})))},s.isReady=function(){var t=this;return Object.keys(this.animations).some((function(e){return!!t.animations[e].isReady()}))},s.render=function(){Object.assign(this.el.style,{position:"absolute",overflow:"hidden",height:this.height+"px",width:this.width+"px",zIndex:this.z}),this.setAnimation(this.animations[this.defaultAnimation]),this.transform()},s.refresh=function(){if(this.animation){if(this.idleCounter===this.normalizeRefrashRate(this.animation.refreshRate)-1&&this.playing&&(4&this.animation.type?this.currentFrame<this.animation.numberOfFrame-1?this.currentFrame+=this.frameIncrement:this.currentFrame==this.animation.numberOfFrame-1&&8&this.animation.type&&"function"==typeof this.callback&&(this.callback(this),this.callback=null):(32&this.animation.type&&(this.currentFrame===this.animation.numberOfFrame-1&&1===this.frameIncrement?this.frameIncrement=-1:0===this.currentFrame&&-1===this.frameIncrement&&(this.frameIncrement=1)),this.currentFrame=(this.currentFrame+this.frameIncrement)%this.animation.numberOfFrame,0===this.currentFrame&&8&this.animation.type&&"function"==typeof this.callback&&this.callback(this)),this.animation.numberOfFrame>1)){var t=0,e=0;1&this.animation.type?(t=-this.animation.offsetX,e=-this.animation.offsetY-this.animation.delta*this.currentFrame):2&this.animation.type&&(t=-this.animation.offsetX-this.animation.delta*this.currentFrame,e=-this.animation.offsetY),this.el.style.backgroundPosition=t+"px "+e+"px"}this.idleCounter=(this.idleCounter+1)%this.normalizeRefrashRate(this.animation.refreshRate)}},s.pauseAnimation=function(){this.playing=!1},s.resumeAnimation=function(){this.playing=!0},s.setAnimation=function(t,e,i){this.animation=t,this.currentFrame=0,this.frameIncrement=1,this.el.style.backgroundImage="url('"+t.imageURL+"')",1&t.type?this.el.style.backgroundRepeat="repeat-x":2&t.type?this.el.style.backgroundRepeat="repeat-y":this.el.style.backgroundRepeat="no-repeat",this.el.style.backgroundPosition=-0-t.offsetX+"px "+(-0-t.offsetY)+"px","function"==typeof i&&(this.callback=i)},s.transform=function(){this.el.style.transform="translate("+(this.x*this.factor-this.offsetX)+"px, "+(this.y*this.factor-this.offsetY)+"px) rotate("+this.angle+"deg) scale("+this.factor*this.factorH+", "+this.factor*this.factorV+")"},s.rotate=function(t,e){!0===e&&(t+=this.angle,t%=360),this.angle=parseFloat(t),this.transform()},s.scale=function(t,e){!0===e&&(t*=this.factor),this.factor=parseFloat(t),this.transform()},s.flipH=function(t){if(void 0===t)return void 0!==this.factorH&&-1===this.factorH;this.factorH=t?-1:1,this.transform()},s.flipV=function(t){if(void 0===t)return void 0!==this.factorV&&-1===this.factorV;this.factorV=t?-1:1,this.transform()},s.setXYZ=function(t,e){var i=this,n=!1;Object.keys(t).forEach((function(s){switch(s){case"x":e&&(t.x+=i.x),i.x=t.x,n=!0;break;case"y":e&&(t.y+=i.y),i.y=t.y,n=!0;break;case"z":e&&(t.z+=i.z),i.z=t.z,i.el.style.zIndex=i.z}})),n&&this.transform()},s.setWH=function(t,e){var i=this;Object.keys(t).forEach((function(n){switch(n){case"w":e&&(t.w+=i.width),i.width=t.w,i.el.style.width=i.width+"px";break;case"h":e&&(t.h+=i.height),i.height=t.h,i.el.style.height=i.height+"px"}}))},e}(y.Ss);function it(t,e){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},it(t,e)}Object.assign(et.prototype,tt);var nt=function(t){function e(e){var i;return void 0===e&&(e={}),i=t.call(this,e)||this,e.map&&(i.map=e.map),i.offsetX=parseInt(i.width/2),i.offsetY=parseInt(i.height/2),i.render(),i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,it(i,n);var s=e.prototype;return s.getTile=function(){return this.map.getTile(this.x,this.y,!0)},s.destroy=function(){t.prototype.destroy.call(this).removeElement()},s.hide=function(){this.el.style.display="none"},s.show=function(){this.el.style.display=""},e}(et);const st=nt;function ot(t,e){return ot=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ot(t,e)}var rt={width:60,height:60,step:10,speed:80,dir:null,preturn:!1},at={l:"left",r:"right",u:"up",d:"down"},ht={l:"r",r:"l",u:"d",d:"u"},ut=function(t){function e(e){var i;return i=t.call(this,e)||this,Object.keys(rt).forEach((function(t){t in e&&(i[t]=e[t])})),i.pauseAnimation(),i.on("item:tile",(function(t){i.setNextAnimation()})),i._moving=!1,i._lastX=i.x,i._lastY=i.y,i._speed=i.speed,i._dir=null,i._nextAnimation=null,i._nextDirection=null,i._moving=!1,i._saveDefaults(),i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,ot(i,n);var s=e.prototype;return s._saveDefaults=function(){var t=this;this._defaults={},["x","y","_lastX","_lastY","dir","_dir","_nextAnimation","_nextDirection","_moving","mode","animation"].forEach((function(e){t._defaults[e]=t[e]}))},s.reset=function(){Object.assign(this,this._defaults),this.transform(),this.setAnimation(this.animation),this.pauseAnimation()},s.update=function(){var t=this.getTile();Math.abs(this.y-t.y)<1&&(this.y=t.y),Math.abs(this.x-t.x)<1&&(this.x=t.x),this._lastX!==this.x||this._lastY!=this.y?(this.setXYZ({x:this.x,y:this.y}),this._lastX=this.x,this._lastY=this.y,this._moving||(this.emit("item:move"),this.resumeAnimation(),this._moving=!0),this.emit("item:position",this._getPositionData())):this._moving&&(this.emit("item:stop"),this.pauseAnimation(),this._moving=!1),this._nextAnimation&&this.animation!==this._nextAnimation&&this.setAnimation(this._nextAnimation)},s._getPositionData=function(){return{x:this.x,y:this.y,tile:this.getTile(),dir:this.dir}},s.move=function(t){if(t||(t=this.dir),t){var e,i=this.getTile(),n=this.getStep();if((t!=this.dir||this._preturn)&&this.canGo(t)){if((t!==this.dir&&t!==this._getOpDirection()||this._preturn)&&!this._isCentered()){if(this._isV(t)){var s=Math.abs(this.x-i.x);this.preturn?this._isCentered("x")?this._preturn=!1:(this.x>i.x?this.x-=this.getMin(s,n):this.x+=this.getMin(s,n),this._preturn=!0):e=this.getMin(s,n)}if(this._isH(t)){var o=Math.abs(this.y-i.y);this.preturn?this._isCentered("y")?this._preturn=!1:(this.y>i.y?this.y-=this.getMin(o,n):this.y+=this.getMin(o,n),this._preturn=!0):e=this.getMin(o,n)}}e||(this.dir=t,this.setNextAnimation())}e||(this.canGo(this.dir)?e=n:(this._isV(this.dir)&&(e=this.getMin(Math.abs(this.y-i.y),n)),this._isH(this.dir)&&(e=this.getMin(Math.abs(this.x-i.x),n)))),e&&("u"===this.dir&&(this.y-=e),"r"===this.dir&&(this.x+=e),"d"===this.dir&&(this.y+=e),"l"===this.dir&&(this.x-=e)),this.x<0&&(this.x=this.map.width*this.map.tileWidth),this.x>this.map.width*this.map.tileWidth&&(this.x=0),this.y<0&&(this.y=this.map.height*this.map.tileHeight),this.y>this.map.height*this.map.tileHeight&&(this.y=0),(i=this.getTile())!==this._lastTile&&(this._lastTile=i,this.emit("item:tile",i)),this.update()}},s.getStep=function(){return this.step*(this._speed/100)},s.setNextAnimation=function(){this._nextAnimation=this.animations[at[this.dir]]},s._getOpDirection=function(t){return ht[t||this.dir]},s.canGo=function(t){var e=this.getTile().get(t);return e&&!e.isHouse()&&!e.isWall()},s._isV=function(t){return"u"===t||"d"===t},s._isH=function(t){return"l"===t||"r"===t},s._isCentered=function(t){var e=this.getTile(),i=e.x===this.x,n=e.y===this.y;return"x"===t?i:("y"===t||i)&&n},s.getMin=function(){for(var t=null,e=0,i=arguments.length;e<i;e++)(null===t||arguments[e]<t)&&(t=arguments[e]);return t},e}(st);Object.assign(ut.prototype,rt);const dt=ut,ct=function(t,e){var i=t.x,n=e.x,s=t.y,o=e.y;return Math.sqrt(Math.pow(i-n,2)+Math.pow(s-o,2))};function lt(t,e){return lt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lt(t,e)}function ft(){return ft=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},ft.apply(null,arguments)}var pt="scatter",mt="chase",gt="frightened",yt="house",vt="dead",bt={imageURL:"img/characters.png",numberOfFrame:2,delta:64,refreshRate:180,type:2},_t={frightened:new Z(ft({},bt,{offsetY:376,offsetX:-2})),frightenedBlink:new Z(ft({},bt,{offsetY:376,offsetX:-2,numberOfFrame:4})),deadRight:new Z(ft({},bt,{offsetY:376,offsetX:254,numberOfFrame:1})),deadDown:new Z(ft({},bt,{offsetY:376,offsetX:318,numberOfFrame:1})),deadUp:new Z(ft({},bt,{offsetY:376,offsetX:382,numberOfFrame:1})),deadLeft:new Z(ft({},bt,{offsetY:376,offsetX:446,numberOfFrame:1})),score200:new Z(ft({},bt,{imageURL:"img/misc.png",numberOfFrame:1,offsetX:-2,offsetY:110})),score400:new Z(ft({},bt,{imageURL:"img/misc.png",numberOfFrame:1,offsetX:62,offsetY:110})),score800:new Z(ft({},bt,{imageURL:"img/misc.png",numberOfFrame:1,offsetX:126,offsetY:110})),score1600:new Z(ft({},bt,{imageURL:"img/misc.png",numberOfFrame:1,offsetX:192,offsetY:110}))},wt={animations:_t,width:64,speed:75,frightenedTime:5,waitTime:4,scatterTarget:0,mode:yt,score:"200",scores:{200:"400",400:"800",800:"1600"},blinky:null,getChaseTarget:function(){return this.pacmanData.tile},tunnelSpeed:null,frightenedSpeed:null,frightenedFlashes:null},Et=function(t){function e(e){var i;i=t.call(this,e)||this,Object.keys(wt).forEach((function(t){t in e&&(i[t]=e[t])}));var n=e.addGameGlobalModeEventListener,s=e.addGameGhostEatenEventListener,o=e.addPacmanEatPillEventListener,r=e.addPacmanPositionEventListener;return i.deadTarget=i.map.house.getR().getU(),i.deadEndX=i._defaults.x,i.deadEndY=i.map.houseCenter.y,i.deadEnd=i.map.getTile(i.deadEndX,i.deadEndY,!0),i.houseTop=i.y-i.getTile().height/2,i.houseBottom=i.y+i.getTile().height/2,i.houseExitTile=i.map.house.getR(),i.houseExitTileX=i.houseExitTile.x-i.map.tileWidth/2,i.scatterTarget=i.map.tiles[i.scatterTarget],i.setMode(i.mode),i.on("item:tile",(function(t){i.mode===gt?i._speed=i.frightenedSpeed:i.mode===vt?i._speed=130:t.isTunnel()?i._speed=i.tunnelSpeed:i._speed=i.speed,i._turnBack?(i.dir=i._getOpDirection(i.dir),i._dir=null,i._nextDir=i.getNextDirection(),i._turnBack=!1):(i._dir=i._nextDir,i._nextDir=i.getNextDirection()),i._eatEvent=!1})),n(i.onGameGlobalMode.bind(i)),o((function(){i.setMode(gt),i.score=200})),s((function(){i.score=i.scores[i.score]})),r((function(t){i.pacmanData=t})),i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,lt(i,n);var s=e.prototype;return s.reset=function(){t.prototype.reset.call(this),this.setMode(this.mode)},s.pause=function(){this.houseTimer&&this.houseTimer.pause(),this.frightenedTimer&&this.frightenedTimer.pause()},s.resume=function(){this.mode===gt&&this.frightenedTimer.resume(),this.mode!==yt||this.housePrepareExit||houseTimer.resume()},s.setMode=function(t){if(!t){if(this.frightened)return this.mode=this.frightened,void(this.frightened=null);t=this.globalMode}t!==gt||this.mode!==yt&&this.mode!==vt?this.mode=t:this.frightened=t,this.onEnterMode(t)},s.shouldExitMode=function(){return this.mode===vt?this.getTile()===this.deadEnd:this.mode===gt?this.frightenedTimer.isElapsed():this.mode===yt?this.getTile()===this.houseExitTile.getU():this.mode!=this.globalMode},s.onEnterMode=function(t){switch(t){case vt:this.emit("item:modefrightened:exit"),this.deadPrepareEnter=!1,this._nextAnimation=this.animations["score"+this.score],this.update();break;case gt:this.frightenedTimer=new K(this.frightenedTime),this.emit("item:modefrightened:enter");break;case yt:this.housePrepareExit=!1,this._speed=70}},s.onExitMode=function(){var t=this.getTile();switch(this.mode){case vt:this.reset();break;case gt:this.setMode(),this.emit("item:modefrightened:exit");break;case yt:this.houseTimer=null,this._dir="l",this._nextDir="l",this._lastTile=t.getD(),this._speed=this.speed,this.setMode();break;default:t.isHouse()||(this._turnBack=!0),this.setMode()}},s.isFrightened=function(){return this.frightened||this.mode===gt},s.isDead=function(){return this.mode===vt},s.onGameGlobalMode=function(t){t&&(this.globalMode=t)},s.move=function(){if(this.shouldExitMode())this.onExitMode();else if(this.mode===vt)if(this.deadPrepareEnter||this.getTile()!==this.deadTarget||(this.deadPrepareEnter=!0),this.deadPrepareEnter){var e=this.deadEndX,i=this.deadEndY;this.y<i&&(e=this.deadTarget.x-this.map.tw/2),this.x<e?this.dir="r":this.x>e?this.dir="l":this.y<i&&(this.dir="d"),"d"===this.dir&&(this.y+=this.getMin(this.getStep(),i-this.y)),"r"===this.dir&&(this.x+=this.getMin(this.getStep(),e-this.x)),"l"===this.dir&&(this.x-=this.getMin(this.getStep(),this.x-e)),this.setNextAnimation(),this.update()}else t.prototype.move.call(this,this._dir);else if(this.mode===yt){this.houseTimer||(this.houseTimer=new K(this.waitTime));var n=this.getTile();this.housePrepareExit||!this.houseTimer.isElapsed()||n.isWall()||(this.housePrepareExit=!0,this.y=n.y),this.frightened&&this.frightenedTimer.isElapsed()&&(this.frightened=null),this.housePrepareExit?(this.x<this.houseExitTileX?this.dir="r":this.x>this.houseExitTileX?this.dir="l":this.dir="u","u"===this.dir&&(this.y-=this.getMin(this.getStep(),this.y-this.houseExitTile.getU().y)),"r"===this.dir&&(this.x+=this.getMin(this.getStep(),this.houseExitTileX-this.x)),"l"===this.dir&&(this.x-=this.getMin(this.getStep(),this.x-this.houseExitTileX))):(this.y<=this.houseTop&&"u"===this.dir&&(this.dir="d"),this.y>=this.houseBottom&&"d"===this.dir&&(this.dir="u"),"u"===this.dir&&(this.y-=this.getMin(this.getStep(),this.y-this.houseTop)),"d"===this.dir&&(this.y+=this.getMin(this.getStep(),this.houseBottom-this.y))),this.setNextAnimation(),this.update()}else t.prototype.move.call(this,this._dir);if(!this._eatEvent){var s=this.pacmanData.tile,o=this.getTile(),r=this._getOpDirection(this.dir);(s===o||this.pacmanData.dir===r&&s===o.get(r))&&(this._eatEvent=!0,this.mode===gt?(this.setMode(vt),this.emit("item:eaten")):this.mode!==vt&&this.emit("item:eat"))}},s.canGo=function(t,e){e||(e=this.getTile());var i=e.get(t);return this.mode===vt?!i||!i.isWall():!!i&&!i.isWall()&&!i.isHouse()},s.getNextDirection=function(){if(this.mode===gt){for(var t=this.getTile().get(this._dir),e=["u","r","d","l","u","r","d","l"],i=Math.floor(4*Math.random()),n=e[i];n&&(n===this._getOpDirection(this._dir)||!this.canGo(n,t));)n=e[++i];return n}for(var s,o,r=this.mode===mt?this.getChaseTarget():this.mode===pt?this.scatterTarget:this.deadTarget,a=this._dir||this.dir,h=this.getTile().get(a),u=["u","l","d","r"],d=0;d<4;d++){var c=u[d];if(c!==this._getOpDirection(a)&&this.canGo(c,h)){var l=h.get(c),f=ct(l,r);(void 0===o||o>f)&&(s=c,o=f)}}return s},s.setNextAnimation=function(){if(this.mode===vt)switch(this.dir){case"u":this._nextAnimation=this.animations.deadUp;break;case"r":this._nextAnimation=this.animations.deadRight;break;case"d":this._nextAnimation=this.animations.deadDown;break;case"l":this._nextAnimation=this.animations.deadLeft}else this.mode===gt||this.mode===yt&&this.frightened?this.frightenedTime-.2*this.frightenedTime>this.frightenedTimer.getElapsed()?this._nextAnimation=this.animations.frightened:this._nextAnimation=this.animations.frightenedBlink:t.prototype.setNextAnimation.call(this)},e}(dt);Object.assign(Et.prototype,wt);const xt=Et,Ot=["----------------------------","----------------------------","----------------------------","============================","=......==..........==......=","=*====.==.========.==.====*=","=.====.==.========.==.====.=","=..........................=","===.==.=====.==.=====.==.===","--=.==.=====.==.=====.==.=--","===.==.=====.==.=====.==.===","ttt.==.......==.......==.ttt","===.=====-========-=====.===","--=.=====-========-=====.=--","--=.--------------------.=--","--=.=====-===hh===-=====.=--","--=.=====-===--===-=====.=--","--=.==----=------=----==.=--","--=.==-==-========-==-==.=--","===.==-==-========-==-==.===","ttt.---==----------==---.ttt","===.========-==-========.===","--=.========-==-========.=--","--=.......---==---.......=--","--=.=====.========.=====.=--","===.=====.========.=====.===","=............--............=","=.====.=====.==.=====.====.=","=.====.=====.==.=====.====.=","=.====.==....==....==.====.=","=*====.==.========.==.====*=","=.====.==.========.==.====.=","=..........................=","============================","----------------------------","----------------------------"],Tt=["----------------------------","----------------------------","----------------------------","============================","tttttt-==..........==-tttttt","======.==.========.==.======","======.==.========.==.======","=*...........==...........*=","=.=======.==.==.==.=======.=","=.=======.==.==.==.=======.=","=.==......==.==.==......==.=","=.==.====-==....==-====.==.=","=.==.====-========-====.==.=","=......==-========-==......=","======.==----------==.======","======.==-===hh===-==.======","=......==-===--===-==......=","=.====.==-=------=-==.====.=","=.====.---========---.====.=","=...==.==-========-==.==...=","===.==.==----------==.==.===","--=.==.====-====-====.==.=--","--=.==.====-====-====.==.=--","--=.........====.........=--","--=.=======.====.=======.=--","===.=======.====.=======.===","ttt....==...----...==....ttt","===.==.==.========.==.==.===","===.==.==.========.==.==.===","=*..==.......==.......==..*=","=.====.=====.==.=====.====.=","=.====.=====.==.=====.====.=","=..........................=","============================","----------------------------","----------------------------"],St=["----------------------------","----------------------------","----------------------------","============================","=.........==....==.........=","=.=======.==.==.==.=======.=","=*=======.==.==.==.=======*=","=.==.........==.........==.=","=.==.==.====.==.====.==.==.=","=....==.====.==.====.==....=","====.==.====.==.====.==.====","====.==..............==.====","t....====-========-====....t","=.==-====-========-====-==.=","=.==--------------------==.=","=.====-==-===hh===-==-====.=","=.====-==-===--===-==-====.=","=.-----==-=------=-==-----.=","=.==-====-========-====-==.=","=.==-====-========-====-==.=","=.==--------------------==.=","=.====-=====-==-=====-====.=","=.====-=====-==-=====-====.=","=......==....==....==......=","===.==.==.========.==.==.===","===.==.==.========.==.==.===","=*..==.......--.......==..*=","=.====.=====.==.=====.====.=","=.====.=====.==.=====.====.=","=......==....==....==......=","=.====.==.========.==.====.=","=.====.==.========.==.====.=","=......==..........==......=","============================","----------------------------","----------------------------"],kt=["----------------------------","----------------------------","----------------------------","============================","=..........................=","=.==.====.========.====.==.=","=*==.====.========.====.==*=","=.==.====.==....==.====.==.=","=.==......==.==.==......==.=","=.====.==.==.==.==.==.====.=","=.====.==.==.==.==.==.====.=","=......==....==....==......=","===.========-==-========.===","--=.========-==-========.=--","--=....==----------==....=--","===-==.==-===hh===-==.==-===","ttt-==.==-===--===-==.==-ttt","======.---=------=---.======","======.==-========-==.======","ttt-==.==-========-==.==-ttt","===-==.==----------==.==-===","--=....=====-==-=====....=--","--=.==.=====-==-=====.==.=--","--=.==....---==---....==.=--","--=.=====.==-==-==.=====.=--","===.=====.==-==-==.=====.===","=.........==----==.........=","=.====.==.========.==.====.=","=.====.==.========.==.====.=","=.==...==..........==...==.=","=*==.=======.==.=======.==*=","=.==.=======.==.=======.==.=","=............==............=","============================","----------------------------","----------------------------"];function jt(){return jt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},jt.apply(null,arguments)}function Rt(t,e){return Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rt(t,e)}var Lt=[{mode:pt,time:7},{mode:mt,time:20},{mode:pt,time:7},{mode:mt,time:20},{mode:pt,time:5},{mode:mt,time:20},{mode:pt,time:5},{mode:mt,time:1e6}],Pt=[[Lt,0,"100","80","71","75","40","20","80","10","85","90","79","50","6","5",Ot,"maze-1"],[Lt,1,"200","90","79","85","45","30","90","15","95","95","83","55","5","5",Ot,"maze-1"],[Lt,2,"500","90","79","85","45","40","90","20","95","95","83","55","4","5",Tt,"maze-2"],[Lt,3,"500","90","79","85","45","40","90","20","95","95","83","55","3","5",Tt,"maze-2"],[Lt,4,"700","100","87","95","50","40","100","20","105","100","87","60","2","5",Tt,"maze-2"],[Lt,5,"700","100","87","95","50","50","100","25","105","100","87","60","5","5",St,"maze-3"],[Lt,6,"1000","100","87","95","50","50","100","25","105","100","87","60","2","5",St,"maze-3"],[Lt,7,"1000","100","87","95","50","50","100","25","105","100","87","60","2","5",St,"maze-3"],[Lt,0,"2000","100","87","95","50","60","100","30","105","100","87","60","1","3",St,"maze-3"],[Lt,1,"2000","100","87","95","50","60","100","30","105","100","87","60","5","5",kt,"maze-4"],[Lt,2,"2000","100","87","95","50","60","100","30","105","100","87","60","2","5",kt,"maze-4"],[Lt,3,"2000","100","87","95","50","80","100","40","105","100","87","60","1","3",kt,"maze-4"],[Lt,4,"5000","100","87","95","50","80","100","40","105","100","87","60","1","3",kt,"maze-4"],[Lt,5,"5000","100","87","95","50","80","100","40","105","100","87","60","3","5",St,"maze-3"],[Lt,6,"5000","100","87","95","50","100","100","50","105","100","87","60","1","3",St,"maze-3"],[Lt,7,"5000","100","87","95","50","100","100","50","105","100","87","60","1","3",St,"maze-3"],[Lt,7,"5000","100","87","95","50","100","100","50","105","0","0","0","0","0",St,"maze-3"],[Lt,7,"5000","100","87","95","50","100","100","50","105","100","87","60","1","3",kt,"maze-4"],[Lt,7,"5000","100","87","95","50","120","100","60","105","0","0","0","0","0",kt,"maze-4"],[Lt,7,"5000","100","87","95","50","120","100","60","105","0","0","0","0","0",kt,"maze-4"],[Lt,7,"5000","90","79","95","50","120","100","60","105","0","0","0","0","0",kt,"maze-4"]],Ft=["game.times","game.bonusIndex","game.bonusScore","pacman.speed","pacman.dotSpeed","ghost.speed","ghost.tunnelSpeed","","","","","pacman.frightenedSpeed","pacman.frightenedDotSpeed","ghost.frightenedSpeed","ghost.frightenedTime","ghost.frightenedFlashes","game.map","game.maze"],At=function(t){function e(e){var i;return(i=t.call(this,jt({level:1,score:0,highScore:0,lives:3,extraLives:1,extraLifeScore:1e4,mode:null},e))||this).url="jsPacman",i.on("change:score",i.onChangeScore.bind(i)),i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,Rt(i,n);var s=e.prototype;return s.addScore=function(t){this.score=this.score+t},s.updateMode=function(){this.mode||(this.modeTimer=new K);for(var t=this.getSettings("game").times,e=0,i=0;t[i];){if(e+=t[i].time,!this.modeTimer.isElapsed(e)||i===t.length-1){this.mode=t[i].mode;break}i++}},s.pause=function(){this.modeTimer&&this.modeTimer.pause()},s.resume=function(){this.modeTimer&&this.modeTimer.resume()},s.getSettings=function(t){for(var e={},i=this.level>Pt.length?Pt.length:this.level,n=Ft.length;n--;){var s=Ft[n].split(".");s[0]===t&&(e[s[1]]=Pt[i-1][n])}return e},s.onChangeScore=function(){this.extraLives&&this.score>=this.extraLifeScore&&(this.extraLives--,this.lives++),this.highScore<this.score&&(this.highScore=this.score)},s.toJSON=function(){return{highScore:this.highScore}},e}($);const Ct=At;function Dt(){return Dt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Dt.apply(null,arguments)}const Mt=function(t,e){return"pinky"===t&&(e=Object.assign({type:"SPRITE_PINKY",dir:"d",defaultAnimation:"down",getChaseTarget:function(){var t=this.pacmanData.tile,e=this.pacmanData.dir;return t.get(e).get(e).get(e).get(e)},animations:Dt({},_t,{right:new Z(Dt({},bt,{offsetY:252,offsetX:-2})),down:new Z(Dt({},bt,{offsetY:252,offsetX:126})),up:new Z(Dt({},bt,{offsetY:252,offsetX:254})),left:new Z(Dt({},bt,{offsetY:252,offsetX:382}))})},e)),"blinky"===t&&(e=Object.assign({type:"SPRITE_BLINKY",dir:"l",waitTime:0,scatterTarget:25,defaultAnimation:"left",animations:Dt({},_t,{right:new Z(Dt({},bt,{offsetY:124,offsetX:-2})),down:new Z(Dt({},bt,{offsetY:124,offsetX:126})),up:new Z(Dt({},bt,{offsetY:124,offsetX:254})),left:new Z(Dt({},bt,{offsetY:124,offsetX:382}))})},e)),"inky"===t&&(e=Object.assign({type:"SPRITE_INKY",dir:"u",waitTime:6,scatterTarget:979,defaultAnimation:"up",getChaseTarget:function(){var t=this.pacmanData.tile,e=this.blinky.getTile(),i=this.pacmanData.dir;return t=t.get(i).get(i),this.map.getTile(t.col+t.col-e.col,t.row+t.row-e.row)},animations:Dt({},_t,{right:new Z(Dt({},bt,{offsetY:316,offsetX:-2})),down:new Z(Dt({},bt,{offsetY:316,offsetX:126})),up:new Z(Dt({},bt,{offsetY:316,offsetX:254})),left:new Z(Dt({},bt,{offsetY:316,offsetX:382}))})},e)),"sue"===t&&(e=Object.assign({type:"SPRITE_SUE",dir:"u",waitTime:8,scatterTarget:953,defaultAnimation:"up",getChaseTarget:function(){var t=this.pacmanData.tile;return ct(t,this.getTile())>16*t.w?t:this.scatterTarget},animations:Dt({},_t,{right:new Z(Dt({},bt,{offsetY:188,offsetX:-2})),down:new Z(Dt({},bt,{offsetY:188,offsetX:126})),up:new Z(Dt({},bt,{offsetY:188,offsetX:254})),left:new Z(Dt({},bt,{offsetY:188,offsetX:382}))})},e)),new xt(e)};function zt(){return zt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},zt.apply(null,arguments)}var It={imageURL:"img/pills.png",numberOfFrame:1};const Xt=function(t){return new st(zt({width:8,height:8,defaultAnimation:"white",animations:{white:new Z(zt({},It,{offsetX:24})),yellow:new Z(zt({},It,{offsetX:56})),red:new Z(zt({},It,{offsetX:88}))}},t))};function Gt(){return Gt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Gt.apply(null,arguments)}var Yt={imageURL:"img/pills.png",numberOfFrame:2,delta:24,refreshRate:450,type:1};const Ht=function(t){return new st(Gt({width:24,height:24,animations:{white:new Z(Gt({},Yt)),yellow:new Z(Gt({},Yt,{offsetX:32})),red:new Z(Gt({},Yt,{offsetX:64}))}},t))};function Nt(t,e){return Nt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nt(t,e)}function Ut(){return Ut=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Ut.apply(null,arguments)}var Bt={imageURL:"img/misc.png",offsetY:0,offsetX:0},Wt={default:new Z(Ut({},Bt)),score100:new Z(Ut({},Bt,{offsetY:60})),score200:new Z(Ut({},Bt,{offsetX:60,offsetY:60})),score500:new Z(Ut({},Bt,{offsetX:120,offsetY:60})),score700:new Z(Ut({},Bt,{offsetX:180,offsetY:60})),score1000:new Z(Ut({},Bt,{offsetX:240,offsetY:60})),score2000:new Z(Ut({},Bt,{offsetX:300,offsetY:60})),score5000:new Z(Ut({},Bt,{offsetX:360,offsetY:60}))},$t={animations:Wt,speed:40,score:"100"},Vt=function(t){function e(e){var i;i=t.call(this,e)||this,Object.keys($t).forEach((function(t){t in e&&(i[t]=e[t])}));var n=e.addPacmanPositionEventListener;return i.on("item:tile",(function(t){i._dir=i._nextDir,i._nextDir=i.getNextDirection(),i._eatEvent=!1,i.getTile()===i._getTarget()&&(i._targetFound?i._targetFound--:i.emit("item:destroy"))})),n((function(t){i.pacmanData=t})),i._targetFound=2,i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,Nt(i,n);var s=e.prototype;return s.move=function(){if(dt.prototype.move.call(this,this._dir),!this._eatEvent){var t=this.pacmanData.tile,e=this.getTile(),i=this._getOpDirection(this._dir);(t===e||this.pacmanData.dir===i&&t===e.get(i))&&(this._eatEvent=!0,this._nextAnimation=this.animations["score"+this.score],this.update(),this.emit("item:eaten",this))}},s.getNextDirection=function(){for(var t,e,i=this._getTarget(),n=this._dir||this.dir,s=this.getTile().get(n),o=["u","l","d","r"],r=0;r<4;r++){var a=o[r];if(a!==this._getOpDirection(n)&&this.canGo(a,s)){var h=s.get(a),u=ct(h,i);(void 0===e||e>u)&&(t=a,e=u)}}return t},s.canGo=function(t,e){e||(e=this.getTile());var i=e.get(t);return!!i&&!i.isWall()&&!i.isHouse()},s._getTarget=function(){return this.map.tunnels[0]},s.setNextAnimation=function(){},e}(dt);Object.assign(Vt.prototype,$t);const Kt=Vt;function qt(){return qt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},qt.apply(null,arguments)}const Jt=function(t,e){return new Kt(qt({animations:qt({},Wt,{default:new Z(qt({},Bt,{offsetX:60*t}))})},e))};function Zt(t,e){return Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zt(t,e)}function Qt(){return Qt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Qt.apply(null,arguments)}var te={imageURL:"img/characters.png",numberOfFrame:4,delta:64,refreshRate:60,offsetY:60,type:2},ee={animations:{right:new Z(Qt({},te)),down:new Z(Qt({},te,{offsetX:256})),up:new Z(Qt({},te,{offsetX:512})),left:new Z(Qt({},te,{offsetX:768}))},dir:"l",defaultAnimation:"left",preturn:!0,frightenedSpeed:null,frightenedDotSpeed:null,dotSpeed:null},ie=function(t){function e(e){var i;i=t.call(this,e)||this,Object.keys(ee).forEach((function(t){t in e&&(i[t]=e[t])}));var n=e.addGameGhostEatEventListener,s=e.addGameGhostModeFrightenedEnter,o=e.addGameGhostModeFrightenedExit;return i._ghostFrightened=[],i.on("item:tile",(function(t){i._ghostFrightened.length?i._speed=i.frightenedSpeed:i._speed=i.speed,t.item&&(t.hasPill()?i.emit("item:eatpill",t):t.hasDot()&&(i.emit("item:eatdot",t),i._ghostFrightened.length?i._speed=i.frightenedDotSpeed:i._speed=i.dotSpeed),t.item.destroy(),t.item=null)})),n((function(t){i._eatenTurns=9,i.dir="r",i.pauseAnimation()})),s((function(t){i._ghostFrightened=i._ghostFrightened.filter((function(e){return e!==t})).concat([t])})),o((function(t){i._ghostFrightened=i._ghostFrightened.filter((function(e){return e!==t}))})),i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,Zt(i,n);var s=e.prototype;return s.reset=function(){dt.prototype.reset.apply(this),this._lastEatenTurnsTime=null},s.move=function(){this._eatenTurns?this._eatenTurnsFrames?this._eatenTurnsFrames--:(9===this._eatenTurns&&this.emit("item:die"),this._eatenTurns>2?(this.dir={d:"l",l:"u",u:"r",r:"d"}[this.dir],this.setNextAnimation(),this.update(),this._eatenTurnsFrames=5):this._eatenTurnsFrames=25,this._eatenTurns--,0===this._eatenTurns&&this.emit("item:life")):dt.prototype.move.apply(this,arguments)},e}(dt);Object.assign(ie.prototype,ee);const ne=ie;var se=function(){function t(t){this.pacmans=[],this.model=t.model;for(var e=0;e<5;e++){var i=new ne({x:t.x+70*e,y:t.y,factor:t.factor,defaultAnimation:"right",addGameGhostEatEventListener:function(){},addGameGhostModeFrightenedEnter:function(){},addGameGhostModeFrightenedExit:function(){},normalizeRefrashRate:function(){return 1}});t.addSprite(i),this.pacmans.push(i),e>this.model.lives-2&&this.pacmans[e].hide()}this.model.on("change:lives",this.render.bind(this))}return t.prototype.render=function(){for(var t=0;t<5;t++)t>this.model.lives-2?this.pacmans[t].hide():this.pacmans[t].show()},t}();const oe=se;var re=function(){function t(t){this.bonuses=[],this.x=t.x,this.y=t.y,this.model=t.model;for(var e=0;e<8;e++){var i=Jt(e,{x:t.x-64*e,y:t.y,factor:t.factor,addPacmanPositionEventListener:function(){},normalizeRefrashRate:function(){return 1}});t.addSprite(i),this.bonuses.push(i),e>=this.model.level&&this.bonuses[e].hide()}this.model.on("change:level",this.render.bind(this))}return t.prototype.render=function(){for(var t=0;t<8;t++)t>=this.model.level?this.bonuses[t].hide():this.bonuses[t].show()},t}();const ae=re;function he(){return he=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},he.apply(null,arguments)}function ue(t,e){return ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ue(t,e)}var de=function(t){t.style.display=""},ce=function(t){t.style.display="none"},le={width:448,height:576,originalWidth:896,originalHeight:1152,dotScore:10,pillScore:50,defaultLives:3,soundEnabled:!0,events:{"click .start":"startLevel"}},fe=function(t){function e(e){var i;return void 0===e&&(e={}),i=t.call(this,e)||this,Object.keys(le).forEach((function(t){t in e&&(i[t]=e[t])})),i.model=new Ct({lives:i.defaultLives}),i.model.fetch(),i.render(),i.elements={splash:i.$(".splash"),start:i.$(".start"),startP1:i.$(".start-p1"),startReady:i.$(".start-ready"),highScore:i.$(".high-score span"),score:i.$(".p1-score span"),gameOver:i.$(".game-over"),soundStatus:i.$(".sound-status"),paused:i.$(".paused"),load:i.$(".loadbar")},i.keyboard.on(_,i._onKeyDown.bind(i)),i.touch.on(T,i._onSwipe.bind(i)),i.sound=new H({soundEnabled:i.soundEnabled,addSound:i.addSound.bind(i)}),i.lives=new oe({lives:i.defaultLives+1,x:40,y:1124,model:i.model,factor:i.scaling.getFactor(),addSprite:i.addSprite.bind(i)}),i.bonuses=new ae({level:i.model.level,x:860,y:1124,model:i.model,factor:i.scaling.getFactor(),addSprite:i.addSprite.bind(i)}),i._onGhostEaten=i._onGhostEaten.bind(i),i._onGhostEat=i._onGhostEat.bind(i),i.model.on("change:score",i._onChangeScore.bind(i)),i.model.on("change:highScore",i._onChangeHighScore.bind(i)),i.model.on("change:lives",i._onChangeLives.bind(i)),i.model.on("change:extraLives",i._onChangeExtraLives.bind(i)),i.model.on("change:mode",i._onChangeMode.bind(i)),i.makeLevel(),i.start((function(){ce(i.elements.load),de(i.elements.start)})),i}var i,n;n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,ue(i,n);var s=e.prototype;return s.startLevel=function(){return this._win?(this.model.level++,this.reset(),void(this._win=!1)):this._gameOver?(this.model.level=1,this.reset(),this._gameOver=!1,ce(this.elements.splash),void this.sound.play("intro")):(ce(this.elements.splash),this.sound.play("intro"),void this.addCallback(this.mainLoop.bind(this)))},s.reset=function(){this.model.mode=null,this.pinky.destroy(),this.blinky.destroy(),this.inky.destroy(),this.sue.destroy(),this.pacman.destroy(),this.map.destroyItems(),this.off("game:ghost:eaten",this._onGhostEaten),this.off("game:ghost:eat",this._onGhostEat),this._win||(this.model.lives=this.defaultLives+1,this.model.score=0),this.keyboard.clear(),this._inputDirection=null,this._lastSwipe=null,this.makeLevel()},s.makeLevel=function(){var t=this;Object.assign(this,this.model.getSettings("game")),this.map=new B(this.map),this.el.classList.remove("maze-1"),this.el.classList.remove("maze-2"),this.el.classList.remove("maze-3"),this.el.classList.remove("maze-4"),this.el.classList.add(this.maze);var e="white";"maze-2"===this.maze&&(e="yellow"),"maze-3"===this.maze&&(e="red"),this._pauseFrames=80,this._destroyBonus=0,this._showBonus=500;for(var i=this.map.tiles.length,n=0;i--;){var s=this.map.tiles[i];if("."===s.code){var o=Xt({defaultAnimation:e,map:this.map,factor:this.scaling.getFactor(),normalizeRefrashRate:this.normalizeRefrashRate.bind(this),x:s.x,y:s.y});s.item=o,this.addSprite(o),n++}if("*"===s.code){var r=Ht({defaultAnimation:e,map:this.map,factor:this.scaling.getFactor(),normalizeRefrashRate:this.normalizeRefrashRate.bind(this),x:s.x,y:s.y});s.item=r,this.addSprite(r),n++}}this.totalItems=n,this.pacman=new ne(he({preturn:!0,x:452,y:848},this.model.getSettings("pacman"),{map:this.map,factor:this.scaling.getFactor(),normalizeRefrashRate:this.normalizeRefrashRate.bind(this),addGameGhostEatEventListener:function(e){return t.on("game:ghost:eat",e)},addGameGhostModeFrightenedEnter:function(e){return t.on("game:ghost:modefrightened:enter",e)},addGameGhostModeFrightenedExit:function(e){return t.on("game:ghost:modefrightened:exit",e)}})),this.pacman.on("item:eatpill",(function(e){t._pauseFrames=2,t.model.addScore(t.pillScore),t.totalItems--,0===t.totalItems?t.win():t.sound.play("frightened")})),this.on("game:ghost:eaten",this._onGhostEaten),this.on("game:ghost:eat",this._onGhostEat),this.pacman.on("item:die",(function(e){t.sound.play("eaten")})),this.pacman.on("item:life",(function(){t.keyboard.clear(),t._inputDirection=null,t._lastSwipe=null,t.model.mode=null,t.pacman.reset(),t.pinky.reset(),t.blinky.reset(),t.inky.reset(),t.sue.reset(),t.bonus&&(t._destroyBonus=0,t._showBonus=250,t.bonus.reset(),t.bonus.hide()),t.showGhosts(),t.model.lives--,t._pacmanEaten=!1,t.model.lives?(de(t.elements.startReady),t._start=1,t._pauseFrames=40):t._pauseFrames=120})),this.pacman.on("item:eatdot",(function(e){t.model.addScore(t.dotScore),t.sound.play("dot"),t.totalItems--,0===t.totalItems&&t.win()})),this.addSprite(this.pacman),this.bonus&&this.bonus.destroy();var a=this.map.tunnels[this.map.tunnels.length-1];this.bonus=Jt(this.bonusIndex,{map:this.map,dir:"l",score:this.bonusScore,x:a.x,y:a.y,factor:this.scaling.getFactor(),normalizeRefrashRate:this.normalizeRefrashRate.bind(this),addPacmanPositionEventListener:function(e){return t.pacman.on("item:position",e)}}),this.bonus.on("item:destroy",(function(e){t.bonus.destroy(),t.bonus=null})),this.bonus.on("item:eaten",(function(e){t._showBonus||(t._pauseFrames=5,t._destroyBonus=25,t.model.addScore(parseInt(e.score)),t.sound.play("bonus"))})),this.addSprite(this.bonus);var h=he({},this.model.getSettings("ghost"),{map:this.map,normalizeRefrashRate:this.normalizeRefrashRate.bind(this),factor:this.scaling.getFactor(),addGameGlobalModeEventListener:function(e){return t.on("game:globalmode",e)},addGameGhostEatenEventListener:function(e){return t.on("game:ghost:eaten",e)},addPacmanPositionEventListener:function(e){return t.pacman.on("item:position",e)},addPacmanEatPillEventListener:function(e){return t.pacman.on("item:eatpill",e)}}),u=this.map.houseCenter.getR();this.pinky=Mt("pinky",he({},h,{x:u.x-this.map.tileWidth/2,y:u.y})),this.addEventListenersToGhost(this.pinky),this.addSprite(this.pinky);var d=this.map.house.getU().getR();this.blinky=Mt("blinky",he({},h,{x:d.x-this.map.tileWidth/2,y:d.y})),this.addEventListenersToGhost(this.blinky),this.addSprite(this.blinky);var c=this.map.houseCenter.getL();this.inky=Mt("inky",he({},h,{blinky:this.blinky,x:c.x-16,y:c.y})),this.addEventListenersToGhost(this.inky),this.addSprite(this.inky);var l=this.map.houseCenter.getR().getR();this.sue=Mt("sue",he({},h,{x:l.x+16,y:l.y})),this.addEventListenersToGhost(this.sue),this.addSprite(this.sue),de(this.elements.startReady),this._win?(this.bonus.hide(),this._start=1):(de(this.elements.startP1),this.hideGhosts(),this.pacman.hide(),this._start=2)},s.addEventListenersToGhost=function(t){var e=this;t.on("item:eat",(function(){return e.emit("game:ghost:eat",t)})),t.on("item:eaten",(function(){return e.emit("game:ghost:eaten",t)})),t.on("item:modefrightened:enter",(function(){return e.emit("game:ghost:modefrightened:enter",t)})),t.on("item:modefrightened:exit",(function(){return e.emit("game:ghost:modefrightened:exit",t)}))},s.mainLoop=function(){if(this.model.updateMode(),this._inputDirection=this._getInputDirection(),this._pauseFrames)this._pauseFrames--;else{if(2===this._start)return ce(this.elements.startP1),this.showGhosts(),this.pacman.show(),this.model.lives=this.defaultLives,this._pauseFrames=60,void this._start--;if(1===this._start)return ce(this.elements.startReady),void this._start--;if(this._win)return void this.startLevel();if(this._gameOver)return ce(this.elements.gameOver),void de(this.elements.splash);this._showPacman&&(this.pacman.show(),this._showPacman=!1),this.pacman.move(this._inputDirection),this._pacmanEaten?this.hideGhosts():(this._soundBackPauseFrames?this._soundBackPauseFrames--:(this._isGhostDead()?this.sound.play("dead"):this._isGhostFrightened()||this.sound.play("back"),this._soundBackPauseFrames=5),this.pinky.move(),this.blinky.move(),this.inky.move(),this.sue.move(),this._destroyBonus?(1===this._destroyBonus&&(this.bonus.destroy(),delete this.bonus),this._destroyBonus--):this.bonus&&(this._showBonus?(1===this._showBonus&&this.bonus.show(),this._showBonus--):this.bonus.move()))}},s.pause=function(){t.prototype.pause.call(this),this.pinky.pause(),this.blinky.pause(),this.inky.pause(),this.sue.pause(),this.muteSound(!0),this.model.pause(),this.elements.paused.style.display=""},s.resume=function(){t.prototype.resume.call(this),this.pinky.resume(),this.blinky.resume(),this.inky.resume(),this.sue.resume(),this.muteSound(!!this._muted),this.model.resume(),ce(this.elements.paused)},s.win=function(){var t=this;this._pauseFrames=120,this._win=!0;var e=14;this.addCallback((function(){return e?(e--,t.el.classList.toggle("blink"),!1):(t.el.classList.remove("blink"),!0)}),8*this.refreshRate),this.hideGhosts(),this.map.hideItems(),this.pacman.pauseAnimation()},s.hideGhosts=function(){this.pinky.hide(),this.blinky.hide(),this.inky.hide(),this.sue.hide(),this.bonus&&this.bonus.hide()},s.showGhosts=function(){this.pinky.show(),this.blinky.show(),this.inky.show(),this.sue.show(),this.bonus&&!this._showBonus&&this.bonus.show()},s._isGhostFrightened=function(){return this.blinky.isFrightened()||this.inky.isFrightened()||this.pinky.isFrightened()||this.sue.isFrightened()},s._isGhostDead=function(){return this.blinky.isDead()||this.inky.isDead()||this.pinky.isDead()||this.sue.isDead()},s._getInputDirection=function(){var t=this.keyboard.keys,e=null;return t[38]?e="u":t[39]?e="r":t[40]?e="d":t[37]&&(e="l"),e?this._lastSwipe=null:this._lastSwipe===S?e="u":this._lastSwipe===k?e="r":this._lastSwipe===j?e="d":this._lastSwipe===R&&(e="l"),e},s.onLoadProgress=function(t){this.elements.load.querySelector(".inner").style.width=t+"%"},s._onSwipe=function(t,e){this._lastSwipe=t},s._onKeyDown=function(t){if(83===t.keyCode){if(!this.soundEnabled)return;this._muted=!this._muted,this.muteSound(this._muted);var e=this.elements.soundStatus;this._muted?e.classList.remove("on"):e.classList.add("on"),de(e),this._hideSoundStatusTimeout&&clearTimeout(this._hideSoundStatusTimeout),this._hideSoundStatusTimeout=setTimeout((function(){ce(e)}),2e3)}else 80===t.keyCode&&(this._paused=!this._paused,this._paused?this.pause():this.resume())},s._onChangeScore=function(t,e){this.elements.score.innerText=e||"00"},s._onChangeHighScore=function(t,e){this.elements.highScore.innerText=e||"00"},s._onChangeLives=function(t,e){0===e&&(this._gameOver=!0,de(this.elements.gameOver),this.hideGhosts(),this.pacman.hide(),this.model.save())},s._onChangeExtraLives=function(t,e){this.sound.play("life")},s._onChangeMode=function(t,e){this.emit("game:globalmode",e)},s._onGhostEaten=function(t){this.pacman.hide(),this._pauseFrames=15,this._showPacman=!0,this.model.addScore(parseInt(t.score)),this.sound.play("eat")},s._onGhostEat=function(){this._pauseFrames=40,this._pacmanEaten=!0},s.template=function(t){return'\n            <div class="score">\n                <div class="p1-score">1UP<br /><span>00</span></div>\n                <div class="high-score">HIGH SCORE<br /><span>'+(t.highScore||"00")+'</span></div>\n                <div class="p2-score">2UP<br /><span>00</span></div>\n            </div>\n            <div class="start-p1" style="display: none">PLAYER ONE</div>\n            <div class="start-ready" style="display: none">READY!</div>\n            <div class="game-over" style="display: none">GAME OVER</div>\n            <div class="sound-status on" style="display: none"><span class="wrap">SOUND: <span class="on">ON</span><span class="off">OFF</span></span></div>\n            <div class="paused" style="display: none"><span class="wrap">PAUSED</span></div>\n            <div class="splash">\n                <span class="title">"JS PAC-MAN"</span>\n                <p class="nerd">HTML - CSS<br><br><span>JAVASCRIPT</span></p>\n                <a class="start" style="display: none">START</a>\n                <div class="loadbar"><div class="inner"></div></div>\n                <p class="keys"><span>&larr;&uarr;&darr;&rarr;</span>:MOVE <span>S</span>:SOUND <span>P</span>:PAUSE</p>\n                <div class="credits">&#169; 2014-'+(new Date).getFullYear()+' <span>8</span>TENTACULOS <a href="https://github.com/8tentaculos/jsPacman">SOURCE+INFO</a></div>\n            </div>\n        '},e}(z);Object.assign(fe.prototype,le);const pe=fe;function me(t,e){return me=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},me(t,e)}window.addEventListener("load",(function(t){document.querySelector(".js-pacman-container");var e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),i=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),n=function(t){function e(e){var i;return(i=t.call(this,e)||this).el.style.left="50%",i.el.style.marginLeft="-"+i.el.offsetWidth/2+"px",i.el.style.top="50%",i.el.style.marginTop="-"+i.el.offsetHeight/2+"px",i}var i,n;return n=t,(i=e).prototype=Object.create(n.prototype),i.prototype.constructor=i,me(i,n),e}(pe);new n({el:document.querySelector(".js-pacman-playground"),width:.9*e,height:.9*i})}))})();